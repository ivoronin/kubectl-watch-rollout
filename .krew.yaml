apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: watch-rollout
spec:
  version: {{ .TagName }}
  homepage: https://github.com/ivoronin/kubectl-watch-rollout
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    {{addURIAndSha "https://github.com/ivoronin/kubectl-watch-rollout/releases/download/{{ .TagName }}/kubectl-watch-rollout_{{ .TagName }}_linux_amd64.tar.gz" .TagName }}
    files:
    - from: kubectl-watch_rollout
      to: "."
    - from: LICENSE
      to: "."
    bin: kubectl-watch_rollout
  - selector:
      matchLabels:
        os: linux
        arch: arm64
    {{addURIAndSha "https://github.com/ivoronin/kubectl-watch-rollout/releases/download/{{ .TagName }}/kubectl-watch-rollout_{{ .TagName }}_linux_arm64.tar.gz" .TagName }}
    files:
    - from: kubectl-watch_rollout
      to: "."
    - from: LICENSE
      to: "."
    bin: kubectl-watch_rollout
  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    {{addURIAndSha "https://github.com/ivoronin/kubectl-watch-rollout/releases/download/{{ .TagName }}/kubectl-watch-rollout_{{ .TagName }}_darwin_amd64.tar.gz" .TagName }}
    files:
    - from: kubectl-watch_rollout
      to: "."
    - from: LICENSE
      to: "."
    bin: kubectl-watch_rollout
  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    {{addURIAndSha "https://github.com/ivoronin/kubectl-watch-rollout/releases/download/{{ .TagName }}/kubectl-watch-rollout_{{ .TagName }}_darwin_arm64.tar.gz" .TagName }}
    files:
    - from: kubectl-watch_rollout
      to: "."
    - from: LICENSE
      to: "."
    bin: kubectl-watch_rollout
  - selector:
      matchLabels:
        os: windows
        arch: amd64
    {{addURIAndSha "https://github.com/ivoronin/kubectl-watch-rollout/releases/download/{{ .TagName }}/kubectl-watch-rollout_{{ .TagName }}_windows_amd64.zip" .TagName }}
    files:
    - from: kubectl-watch_rollout.exe
      to: "."
    - from: LICENSE
      to: "."
    bin: kubectl-watch_rollout.exe
  - selector:
      matchLabels:
        os: windows
        arch: arm64
    {{addURIAndSha "https://github.com/ivoronin/kubectl-watch-rollout/releases/download/{{ .TagName }}/kubectl-watch-rollout_{{ .TagName }}_windows_arm64.zip" .TagName }}
    files:
    - from: kubectl-watch_rollout.exe
      to: "."
    - from: LICENSE
      to: "."
    bin: kubectl-watch_rollout.exe
  shortDescription: Monitor deployment rollouts with live progress
  description: |
    Monitors deployment rollouts in real-time, displaying progress bars, pod
    status, warnings, and completion estimates.

    Features include real-time progress bars for new and old ReplicaSets, pod
    status counts (Available, Ready, Current), warning events from pods with
    aggregation, estimated time to completion, progress deadline tracking,
    automatic detection of rollout success or failure, and auto-discovery mode
    for active rollouts.
